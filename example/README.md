# Matic-transfers

Matic-transfers is an exemplary project that showcases the usage of Chainflow to index all MATIC transfers occurring on the Ethereum blockchain.

## Overview
The project consists of three distinct packages, each serving a specific function:

1. **Producers**: This package acts as the initial entry point for the indexer service. It collects all blockchain data from a particular chain and streams it into Kafka without any discrimination.

2. **Transformers**: The Transformers package consumes the blockchain data from the Kafka stream generated by the producers. It then filters out all MATIC transfers and reproduces these events to a dedicated topic within the Kafka stream.

3. **Consumers**: Consumers are responsible for subscribing to the event-specific Kafka stream and persisting the data into a database. Additionally, they expose endpoints that allow clients to retrieve the data according to their specific requirements.

The Matic-transfers project serves as a useful reference for understanding how Chainflow can be effectively utilized to manage and process blockchain data efficiently.


## How to Build

This project can build on Windows, MacOs and Linux

Steps to build specifically on Ubuntu are as follows:

- Install docker and check version once installed
  - ```bash
    docker --version
    ```
  
- Run docker compose from dev-env. Make sure that docker daemon is running.
  - ```bash
    cd dev-env
    docker compose up -d
    ```

- Make sure MongoDb is installed and the service is running
  - ```bash
    curl -fsSL https://www.mongodb.org/static/pgp/server-4.4.asc | sudo apt-key add -
    apt-key list
    echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/4.4 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-4.4.list
    sudo apt update
    sudo apt install mongodb-org
    sudo systemctl start mongod.service
    sudo systemctl status mongod
    ```
  
- Run [Producer](./producer/README.md)

- Run [Transformer](./transformer/README.md)

- Run [Consumer](./consumer/README.md)

  